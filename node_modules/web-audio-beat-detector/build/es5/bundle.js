(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('web-audio-beat-detector-broker')) :
	typeof define === 'function' && define.amd ? define(['exports', 'web-audio-beat-detector-broker'], factory) :
	(global = global || self, factory(global.webAudioBeatDetector = {}, global.webAudioBeatDetectorBroker));
}(this, (function (exports, webAudioBeatDetectorBroker) { 'use strict';

	// This is the minified and stringified code of the web-audio-beat-detector-worker package.
	var worker = "!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";r.r(t);r(1)},function(e,t,r){!function(e){\"use strict\";e=e&&e.hasOwnProperty(\"default\")?e.default:e;var t=function(e,t,r){for(var n=e.length,o=[],a=!1,u=0;u<n;u+=1)e[u]>t?a=!0:a&&(a=!1,o.push(u-1),u+=r/4-1);return a&&o.push(n-1),o},r=function(r,n){var o=function(e){for(var t=0,r=e.length,n=0;n<r;n+=1)e[n]>t&&(t=e[n]);return t}(r),a=.3*o,u=[],i=o-.05*o;if(o>.25)for(;u.length<30&&i>=a;)u=t(r,i,n),i-=.05*o;var s=function(t,r){var n=[];return t.forEach((function(t){for(var o=60/(t.interval/r);o<90;)o*=2;for(;o>180;)o/=2;var a=!1,u=t.peaks.length;n.forEach((function(r){if(r.tempo===o&&(r.score+=t.peaks.length,r.peaks=[].concat(e(r.peaks),e(t.peaks)),a=!0),r.tempo>o-.5&&r.tempo<o+.5){var n=2*Math.abs(r.tempo-o);u+=(1-n)*r.peaks.length,r.score+=(1-n)*t.peaks.length}})),a||n.push({peaks:t.peaks,score:u,tempo:o})})),n}(function(e){var t=[];return e.forEach((function(r,n){for(var o=Math.min(e.length-n,10),a=function(o){var a=e[n+o]-r;t.some((function(e){return e.interval===a&&(e.peaks.push(r),!0)}))||t.push({interval:a,peaks:[r]})},u=1;u<o;u+=1)a(u)})),t}(u),n);return s.sort((function(e,t){return t.score-e.score})),s};addEventListener(\"message\",(function(e){var t=e.data;try{if(\"analyze\"===t.method){var n=t.id,o=t.params,a=function(e,t){var n=r(e,t);if(0===n.length)throw new Error(\"The given channelData does not contain any detectable beats.\");return n[0].tempo}(o.channelData,o.sampleRate);postMessage({error:null,id:n,result:{tempo:a}})}else{if(\"guess\"!==t.method)throw new Error('The given method \"'.concat(t.method,'\" is not supported'));var u=t.id,i=t.params,s=function(e,t){var n=r(e,t);if(0===n.length)throw new Error(\"The given channelData does not contain any detectable beats.\");var o=n[0],a=o.peaks,u=o.tempo,i=Math.round(u),s=60/i;a.sort((function(e,t){return e-t}));for(var f=a[0]/t;f>s;)f-=s;return{bpm:i,offset:f}}(i.channelData,i.sampleRate),f=s.bpm,c=s.offset;postMessage({error:null,id:u,result:{bpm:f,offset:c}})}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))}(r(2))},function(e,t,r){var n=r(3),o=r(4),a=r(5);e.exports=function(e){return n(e)||o(e)||a()}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}}]);"; // tslint:disable-line:max-line-length

	var blob = new Blob([worker], {
	  type: 'application/javascript; charset=utf-8'
	});
	var url = URL.createObjectURL(blob);
	var webAudioBeatDetector = webAudioBeatDetectorBroker.load(url);
	var analyze = webAudioBeatDetector.analyze;
	var guess = webAudioBeatDetector.guess;
	URL.revokeObjectURL(url);

	exports.analyze = analyze;
	exports.guess = guess;

	Object.defineProperty(exports, '__esModule', { value: true });

})));
