<div id="ideaView">
  <!-- Idea Section - Displayed when a file is opened -->
  <div id="ideaSection">
    <div class="filePage">
      <!-- Go Back, Options, and Details Buttons -->
      <div class="btn-group-justified">
        <div id="previousFolder" class="btn btn-primary" ng-click="openPrevious()">Go Back</div>
        <div id="fileOptionsButton" class="btn-group" role="group">
          <button id="fileOptionsGroup" type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Options
          </button>
          <div class="dropdown-menu" aria-labelledby="fileOptionsGroup">
            <div class="btn btn-default" ng-click="openMiniPlayer()">Mini Player</div>
            <div class="btn btn-default" ng-click="goToLink()">Link</div>
          </div>
        </div>
        <div id="folderDetailsButton" class="btn btn-primary" ng-click="showFolderDetails()">Details</div>
      </div>
      <!-- End of Buttons -->
      <!-- Folder Details Modal -->
      <div id="folderDetails">
        <div class="col-md-12 col-xs-12 userInfo">
          <div class="col-xs-12">
            <div class="col-xs-12 col-sm-4">
              <h4>Band Name: </h4><p>{{ band.name }}</p>
            </div>
            <div class="col-xs-12 col-sm-4">
              <h4>Folder Name: </h4><p>{{ folder.name }}</p>
            </div>
            <div class="col-xs-12 col-sm-4">
              <h4>File Name: </h4><p>{{ file.name }}</p>
            </div>
          </div>
          <div class="col-xs-12">
            <hr>
            <div class="col-xs-12 col-sm-3">
              <h4>Views: </h4><p>{{ file.views }}</p>
            </div>
            <div class="col-xs-12 col-sm-3">
              <h4>Size: </h4><p>{{ file.size }}</p>
            </div>
            <div class="col-xs-12 col-sm-3">
              <h4>Comments: </h4><p>{{ file.comments.length }}</p>
            </div>
            <div class="col-xs-12 col-sm-3">
              <h4>Highlights: </h4><p>{{ file.highlights.length }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- End of Folder Details Modal -->
      <!-- Container that holds an opened file -->
      <div id="file">
        <!-- Band Name | Folder Name -->
        <p id="folderName" class="col-xs-12" >{{ band.name }} | {{ folder.name }}</p>

        <div id="ideaContainer" class="col-xs-12 col-sm-6 ">
          <div id="ideaLoading" class="loader"></div>
          <div id="idea" class="col-xs-12">
            <p id="fileTitle" class="fileTitle col-xs-12">{{ file.name }}</p>
            <div class="col-xs-12">
                <audio id="audio" ontimeupdate="initProgressBar()" style="display:none;" class="col-xs-12" preload="auto" controls>
                  <source id="m4aSource" ng-src="{{ file.link }}" type="audio/mp4"></source>
                  <p>Your browser does not support HTML5 audio.</p>
                </audio>
                <div class="col-xs-12">
                  <!-- Buttons -->
                  <div class="ideaButtons">

                    <div id="likeButton" class="likes" ng-click="plusOneOnFile()">{{ file.likes }}<img src="../img/black-metal.png"/></div>
                    <div id="likedButton" class="likedButton" ng-click="stopPropogation($event); showLikesOnFile(file); ">{{ file.likes }}<img src="../img/metal.png"/></div>
                    <div class="download" ng-click="openMiniPlayer()"><img src="img/playButton.png"></div>
                    <div class="download" ng-click="downloadFromFile()"><img src="img/black-downloadButton.png"></div>
                  </div>
                  <div id="play-btn" style="display:none;" ng-click="play()">
                    Play
                  </div>
                  <div id="pause-btn" style="display:inline-block" ng-click="pause()">
                    Pause
                  </div>

                </div>



                <!-- File Data
                <div class="fileData col-xs-4">
                  <a ng-click="showLikesOnFile(file)" href="">{{ file.likes }} likes</a><br>
                  <a ng-click="switchToComments()" href="">{{ file.comments.length }} comments</a><br>
                  <a ng-click="switchToHighlights()" href="">{{ file.highlights.length }} highlights</a><br>
                  <p>{{ file.views }} views</p>
                  <div id="openFileDetails"></div>
                </div>
                -->
                <p id="audioTime"></p>
                <div id="audioTimeline" class="col-xs-12">
                  <div id="audioFilePercentageBar"></div>
                </div>
              <!--</div>-->
              <video id="video" controls>
                <source ng-src="{{ file.link }}" type="audio/mp4"></source>
              </video>
            </div>
            <br>

          <!-- File Data, Buttons, Comments, and Highlights -->


            <!-- Start of Highlights -->
            <div id="highlights" class="col-xs-12">
              <div class="commentButtons">
                <div class="comment" ng-click="switchToComments()">{{ file.comments.length }} Comments <img src="img/commentButton.png" style="height: 60%;"></div>
                <div id="highlightButton" class="highlight" ng-click="highlightMoment($event)">+ Highlight</div>
              </div>
              <div id="highlightDetails">
                <div id="momentIndicator" class="col-xs-6">Highlight Time {{ currentTimeToString(currentTime) }}</div>
                <div class="btn-group">
                  <div class="btn btn-default btn-sm" ng-click="rewindHighlight()"><<</div>
                  <div class="btn btn-default btn-sm" ng-click="playHighlight()">Play Highlight</div>
                  <div class="btn btn-default btn-sm" ng-click="fastForwardHighlight()">>></div>
                </div>
                <br><br>
                <div id="highlightInput" class="commentList">
                  <textarea id="highlightText" cols="74" rows="4" type="text" name="highlight" placeholder="Comment on highlight..."></textarea>
                  <input id="highlightSubmitButton" class="btn btn-default btn-md" type='button' value='Submit Highlight' ng-click='submitHighlight(file)'/>
                </div>
              </div>
              <!-- List of Highlights -->
              <div ng-repeat="highlightObject in file.highlights | reverse | limitTo:maxHighlights" class="fileComments">
                <div class="userComment col-xs-12"><hr>
                  <p class="highlightUserName col-xs-6"><b>{{ highlightObject.userName }}</b></p>
                  <p class="commentTime col-xs-6"><i>{{ highlightObject.commentTime }}</i></p>
                  <p class="commentText col-xs-10">{{ highlightObject.comment }}</p>
                  <p class="highlightPlayButton" ng-click="playHighlightFromComment(highlightObject.highlightTime)">Play {{ currentTimeToString(highlightObject.highlightTime) }}</p>
                </div>
              </div>
              <div id="showHighlightsButton" class="fileComments" ng-disabled="file.highlights.length < maxHighlights" ng-click="showAllHighlights()">Show All Highlights ({{file.highlights.length}})</div>
              <div id="hideHighlightsButton" class="fileComments" ng-click="hideHighlights()">Hide Highlights</div>
            </div>
            <!-- End of Highlights -->
            <!-- Start of Comments -->
            <div id="comments" class="col-xs-12">
              <div class="commentButtons">
                <div class="highlight" ng-click="switchToHighlights()">{{ file.highlights.length }} Highlights <img src="img/timeButton.png" style="height: 40%;"></div>
                <div id="commentButton" class="comment" ng-click="comment($event)">+ Comment</div>
              </div>
              <div id="commentInput" class="commentList">
                <textarea id="commentText" cols="74" rows="4" type="text" name="comment" placeholder="Comment..."></textarea>
                <input type='button' class="btn btn-default btn-md" value='Submit Comment' ng-click='submitComment(file)'/>
              </div>
              <!-- List of Comments -->
              <div ng-repeat="commentObject in file.comments | reverse | limitTo:maxComments" class="fileComments">
                <div class="userComment col-xs-12"><hr>
                  <p class="commentUserName col-xs-6"><b>{{ commentObject.userName }}</b></p>
                  <p class="commentTime col-xs-6"><i>{{ commentObject.commentTime }}</i></p>
                  <p class="commentText col-xs-12">{{ commentObject.comment }}</p>
                </div>
              </div>
              <div id="showCommentsButton" class="fileComments" ng-disabled="file.comments.length < maxComments" ng-click="showAllComments()">Show All Comments ({{file.comments.length}})</div>
              <div id="hideCommentsButton" class="fileComments" ng-click="hideComments()">Hide Comments</div>
            </div>
            <!-- End of Comments -->
          </div>
          <br>
        </div>
        <!-- Container that holds all files playlist -->
        <div id="fileList" class="col-xs-12 col-sm-6">
          <div class="col-xs-12">
            <div ng-animate="'animate'" ng-repeat="song in files |
            filter:{name: search } | startFrom:currentPage*pageSize
            | limitTo:pageSize | orderBy:sortBy" class="">
              <!-- This is a Single File -->
              <div id="file-{{ song.id }}" class="playListFile col-xs-12" data-index="{{ song.fileIndex }}" ng-click="openFile(song)">
                <div class="playListFileInfo col-xs-12">
                  <!-- <p class="deleteButton" ng-click="deleteFile($index)"> x </p>-->
                  <p class="col-sm-4 col-xs-12">{{ song.name }}</p>
                  <p class="col-sm-8 col-xs-12">{{ song.likes }} <img src="../img/black-metal.png"/> | {{ song.views }} <img src="../img/music.png"/> | {{ song.comments.length }} <img src="../img/commentButton.png"/> | {{ song.highlights.length }} <img src="../img/timeButton.png"/></p>
                </div>
              </div>
              <!-- End of Single File -->
            </div>
          </div>
        </div>
        <!-- End of Playlist -->
      </div>
      <!-- End of File -->
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $("#file-" + CURRENT_FILE.id).addClass("playListFileSelected");
    $(".playListFile").click(function() {
      console.log("dude");
      $(".playListFile").removeClass("playListFileSelected");
      $(this).addClass("playListFileSelected");
    });

  });
  getElementById("audio").addEventListener('canplaythrough', function() {
    getElementById("audio").play();
  }, false);
</script>
<script src="js/managers/uploader.js" type="text/javascript"></script>
